{"/home/convenia/Code/gigi/register.js":{"path":"/home/convenia/Code/gigi/register.js","statementMap":{"0":{"start":{"line":1,"column":15},"end":{"line":1,"column":33}},"1":{"start":{"line":2,"column":22},"end":{"line":2,"column":47}},"2":{"start":{"line":4,"column":0},"end":{"line":9,"column":2}},"3":{"start":{"line":11,"column":0},"end":{"line":15,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"24e03101aeb88c248a57d7b8f27f3ea8d5e36338","contentHash":"286063b88ac2b95fd29b69c3bd8f4574609b0ff3cdc5eae1ef59652d67c5e5ee"},"/home/convenia/Code/gigi/src/engine/World/World.spec.ts":{"path":"/home/convenia/Code/gigi/src/engine/World/World.spec.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":30}},"3":{"start":{"line":5,"column":0},"end":{"line":10,"column":3}},"4":{"start":{"line":6,"column":4},"end":{"line":9,"column":7}},"5":{"start":{"line":7,"column":22},"end":{"line":7,"column":43}},"6":{"start":{"line":8,"column":8},"end":{"line":8,"column":75}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":18},"end":{"line":5,"column":19}},"loc":{"start":{"line":5,"column":24},"end":{"line":10,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":34},"end":{"line":6,"column":35}},"loc":{"start":{"line":6,"column":40},"end":{"line":9,"column":5}},"line":6}},"branchMap":{},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":0},"f":{"0":0,"1":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/World/World.spec.ts","sources":["/home/convenia/Code/gigi/src/engine/World/World.spec.ts"],"names":[],"mappings":";;AAAA,mCAA2B;AAC3B,+BAA6B;AAE7B,QAAQ,CAAC,OAAO,EAAE,GAAG,EAAE;IACrB,EAAE,CAAC,yBAAyB,EAAE,GAAG,EAAE;QACjC,MAAM,KAAK,GAAG,IAAI,eAAK,EAAE,CAAA;QAEzB,aAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE,sBAAsB,CAAC,CAAA;IAC7D,CAAC,CAAC,CAAA;AACJ,CAAC,CAAC,CAAA","sourcesContent":["import World from './World'\nimport { expect } from 'chai'\n\ndescribe('world', () => {\n  it('should have no entities', () => {\n    const world = new World()\n\n    expect(world.entities.length === 0, 'no entities expected')\n  })\n})\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"70f588f85e59425993496dc82bfe7698a44932f0","contentHash":"3317267b5e3d575f62927ccda2979d4dd64744ea89e41ebb70c391f04a95c9f7"},"/home/convenia/Code/gigi/src/engine/World/World.ts":{"path":"/home/convenia/Code/gigi/src/engine/World/World.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":37}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":28}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":27}},"6":{"start":{"line":10,"column":8},"end":{"line":12,"column":10}},"7":{"start":{"line":11,"column":12},"end":{"line":11,"column":29}},"8":{"start":{"line":13,"column":8},"end":{"line":15,"column":10}},"9":{"start":{"line":14,"column":12},"end":{"line":14,"column":32}},"10":{"start":{"line":16,"column":8},"end":{"line":18,"column":10}},"11":{"start":{"line":17,"column":12},"end":{"line":17,"column":43}},"12":{"start":{"line":24,"column":8},"end":{"line":26,"column":10}},"13":{"start":{"line":25,"column":12},"end":{"line":25,"column":39}},"14":{"start":{"line":29,"column":8},"end":{"line":29,"column":66}},"15":{"start":{"line":30,"column":8},"end":{"line":30,"column":66}},"16":{"start":{"line":31,"column":8},"end":{"line":31,"column":72}},"17":{"start":{"line":34,"column":8},"end":{"line":34,"column":68}},"18":{"start":{"line":35,"column":8},"end":{"line":35,"column":68}},"19":{"start":{"line":36,"column":8},"end":{"line":36,"column":74}},"20":{"start":{"line":39,"column":8},"end":{"line":39,"column":35}},"21":{"start":{"line":40,"column":8},"end":{"line":40,"column":60}},"22":{"start":{"line":41,"column":8},"end":{"line":44,"column":30}},"23":{"start":{"line":42,"column":12},"end":{"line":42,"column":34}},"24":{"start":{"line":44,"column":12},"end":{"line":44,"column":30}},"25":{"start":{"line":45,"column":8},"end":{"line":45,"column":24}},"26":{"start":{"line":48,"column":22},"end":{"line":48,"column":51}},"27":{"start":{"line":49,"column":8},"end":{"line":50,"column":19}},"28":{"start":{"line":50,"column":12},"end":{"line":50,"column":19}},"29":{"start":{"line":51,"column":8},"end":{"line":51,"column":39}},"30":{"start":{"line":52,"column":8},"end":{"line":52,"column":25}},"31":{"start":{"line":53,"column":8},"end":{"line":53,"column":54}},"32":{"start":{"line":53,"column":41},"end":{"line":53,"column":52}},"33":{"start":{"line":54,"column":8},"end":{"line":59,"column":11}},"34":{"start":{"line":55,"column":12},"end":{"line":58,"column":13}},"35":{"start":{"line":56,"column":16},"end":{"line":56,"column":41}},"36":{"start":{"line":57,"column":16},"end":{"line":57,"column":41}},"37":{"start":{"line":60,"column":8},"end":{"line":60,"column":24}},"38":{"start":{"line":61,"column":8},"end":{"line":61,"column":29}},"39":{"start":{"line":69,"column":25},"end":{"line":69,"column":38}},"40":{"start":{"line":70,"column":8},"end":{"line":70,"column":79}},"41":{"start":{"line":70,"column":35},"end":{"line":70,"column":77}},"42":{"start":{"line":73,"column":0},"end":{"line":73,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":18},"end":{"line":27,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":27},"end":{"line":10,"column":28}},"loc":{"start":{"line":10,"column":43},"end":{"line":12,"column":9}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":30},"end":{"line":13,"column":31}},"loc":{"start":{"line":13,"column":46},"end":{"line":15,"column":9}},"line":13},"3":{"name":"(anonymous_3)","decl":{"start":{"line":16,"column":27},"end":{"line":16,"column":28}},"loc":{"start":{"line":16,"column":51},"end":{"line":18,"column":9}},"line":16},"4":{"name":"(anonymous_4)","decl":{"start":{"line":24,"column":31},"end":{"line":24,"column":32}},"loc":{"start":{"line":24,"column":47},"end":{"line":26,"column":9}},"line":24},"5":{"name":"(anonymous_5)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":11},"end":{"line":32,"column":5}},"line":28},"6":{"name":"(anonymous_6)","decl":{"start":{"line":33,"column":4},"end":{"line":33,"column":5}},"loc":{"start":{"line":33,"column":14},"end":{"line":37,"column":5}},"line":33},"7":{"name":"(anonymous_7)","decl":{"start":{"line":38,"column":4},"end":{"line":38,"column":5}},"loc":{"start":{"line":38,"column":30},"end":{"line":46,"column":5}},"line":38},"8":{"name":"(anonymous_8)","decl":{"start":{"line":47,"column":4},"end":{"line":47,"column":5}},"loc":{"start":{"line":47,"column":26},"end":{"line":62,"column":5}},"line":47},"9":{"name":"(anonymous_9)","decl":{"start":{"line":53,"column":34},"end":{"line":53,"column":35}},"loc":{"start":{"line":53,"column":41},"end":{"line":53,"column":52}},"line":53},"10":{"name":"(anonymous_10)","decl":{"start":{"line":54,"column":24},"end":{"line":54,"column":25}},"loc":{"start":{"line":54,"column":34},"end":{"line":59,"column":9}},"line":54},"11":{"name":"(anonymous_11)","decl":{"start":{"line":68,"column":4},"end":{"line":68,"column":5}},"loc":{"start":{"line":68,"column":20},"end":{"line":71,"column":5}},"line":68},"12":{"name":"(anonymous_12)","decl":{"start":{"line":70,"column":25},"end":{"line":70,"column":26}},"loc":{"start":{"line":70,"column":35},"end":{"line":70,"column":77}},"line":70}},"branchMap":{"0":{"loc":{"start":{"line":41,"column":8},"end":{"line":44,"column":30}},"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":44,"column":30}},{"start":{"line":41,"column":8},"end":{"line":44,"column":30}}],"line":41},"1":{"loc":{"start":{"line":49,"column":8},"end":{"line":50,"column":19}},"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":50,"column":19}},{"start":{"line":49,"column":8},"end":{"line":50,"column":19}}],"line":49},"2":{"loc":{"start":{"line":55,"column":12},"end":{"line":58,"column":13}},"type":"if","locations":[{"start":{"line":55,"column":12},"end":{"line":58,"column":13}},{"start":{"line":55,"column":12},"end":{"line":58,"column":13}}],"line":55},"3":{"loc":{"start":{"line":70,"column":35},"end":{"line":70,"column":77}},"type":"binary-expr","locations":[{"start":{"line":70,"column":35},"end":{"line":70,"column":51}},{"start":{"line":70,"column":55},"end":{"line":70,"column":77}}],"line":70}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/World/World.ts","sources":["/home/convenia/Code/gigi/src/engine/World/World.ts"],"names":[],"mappings":";;AAAA,iCAAuC;AACvC,qCAAgG;AAChG,sCAAiE;AAIjE,MAAqB,KAAM,SAAQ,aAAK;IAAxC;;QACE,aAAQ,GAAkB,EAAE,CAAA;QAcpB,gBAAW,GAAG,CAAC,EAAE,MAAM,EAAmB,EAAQ,EAAE;YAC1D,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;QAClB,CAAC,CAAA;QAEO,mBAAc,GAAG,CAAC,EAAE,MAAM,EAAmB,EAAQ,EAAE;YAC7D,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;QACrB,CAAC,CAAA;QAEO,gBAAW,GAAG,CAAC,EAAE,MAAM,EAAE,MAAM,EAAiB,EAAQ,EAAE;YAChE,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,MAAM,CAAC,CAAA;QAChC,CAAC,CAAA;QAED;;;;WAIG;QACK,oBAAe,GAAG,CAAC,EAAE,MAAM,EAAiB,EAAQ,EAAE;YAC5D,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAA;QAC5B,CAAC,CAAA;IA0CH,CAAC;IAzEC,IAAI;QACF,kBAAS,CAAC,mBAAU,EAAE,IAAI,CAAC,WAAW,CAAC,CAAA;QACvC,kBAAS,CAAC,mBAAU,EAAE,IAAI,CAAC,WAAW,CAAC,CAAA;QACvC,kBAAS,CAAC,sBAAa,EAAE,IAAI,CAAC,cAAc,CAAC,CAAA;IAC/C,CAAC;IAED,OAAO;QACL,oBAAW,CAAC,mBAAU,EAAE,IAAI,CAAC,WAAW,CAAC,CAAA;QACzC,oBAAW,CAAC,mBAAU,EAAE,IAAI,CAAC,WAAW,CAAC,CAAA;QACzC,oBAAW,CAAC,sBAAa,EAAE,IAAI,CAAC,cAAc,CAAC,CAAA;IACjD,CAAC;IAuBM,SAAS,CAAE,MAAc,EAAE,MAAiB;QACjD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;QAC1B,MAAM,CAAC,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,eAAe,CAAC,CAAA;QAEnD,IAAI,MAAM;YAAE,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;;YAC5B,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;QAEtB,MAAM,CAAC,MAAM,EAAE,CAAA;IACjB,CAAC;IAEM,aAAa,CAAE,MAAc;QAClC,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,CAAA;QAE3C,IAAI,KAAK,GAAG,CAAC;YAAE,OAAM;QAErB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAA;QAC9B,MAAM,CAAC,OAAO,EAAE,CAAA;QAChB,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAY,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC,CAAA;QAExD,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAS,EAAE,EAAE;YAC5B,IAAI,IAAI,CAAC,MAAM,EAAE;gBACf,IAAI,CAAC,QAAQ,EAAE,OAAO,EAAE,CAAA;gBACxB,IAAI,CAAC,QAAQ,EAAE,OAAO,EAAE,CAAA;aACzB;QACH,CAAC,CAAC,CAAA;QAEF,MAAM,CAAC,MAAM,EAAE,CAAA;QACf,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;IACtB,CAAC;IAED;;;;OAIG;IACI,MAAM,CAAC,OAAsB;QAClC,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAA;QAE9B,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,SAAS,IAAI,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAA;IACxE,CAAC;CACF;AA5ED,wBA4EC","sourcesContent":["import { Scene, Object3D } from 'three'\nimport { EntityPayload, UpdatePayload, Object3DPayload, subscribe, unsubscribe } from '@/engine'\nimport { ADD_ENTITY, ADD_OBJECT, REMOVE_OBJECT } from '../events'\nimport Entity from './Entity'\nimport Component from './Component'\n\nexport default class World extends Scene {\n  entities: Array<Entity> = []\n\n  init() {\n    subscribe(ADD_ENTITY, this.onAddEntity)\n    subscribe(ADD_OBJECT, this.onAddObject)\n    subscribe(REMOVE_OBJECT, this.onRemoveObject)\n  }\n\n  destroy() {\n    unsubscribe(ADD_ENTITY, this.onAddEntity)\n    unsubscribe(ADD_OBJECT, this.onAddObject)\n    unsubscribe(REMOVE_OBJECT, this.onRemoveObject)\n  }\n\n  private onAddObject = ({ object }: Object3DPayload): void => {\n    this.add(object)\n  }\n\n  private onRemoveObject = ({ object }: Object3DPayload): void => {\n    this.remove(object)\n  }\n\n  private onAddEntity = ({ entity, parent }: EntityPayload): void => {\n    this.addEntity(entity, parent)\n  }\n\n  /**\n   * Removes object from scene\n   * @param payload Entity event data\n   * @returns void\n   */\n  private onEntityDestroy = ({ entity }: EntityPayload): void => {\n    this.destroyEntity(entity)\n  }\n\n  public addEntity (entity: Entity, parent?: Object3D): void {\n    this.entities.push(entity)\n    entity.subscribe('destroyed', this.onEntityDestroy)\n\n    if (parent) parent.attach(entity)\n    else super.add(entity)\n\n    entity.enable()\n  }\n\n  public destroyEntity (entity: Entity): void {\n    const index = this.entities.indexOf(entity)\n\n    if (index < 0) return\n\n    this.entities.splice(index, 1)\n    entity.disable()\n    entity.components.forEach((c: Component) => c.destroy())\n\n    entity.traverse((node: any) => {\n      if (node.isMesh) {\n        node.geometry?.dispose()\n        node.material?.dispose()\n      }\n    })\n\n    entity.remove()\n    super.remove(entity)\n  }\n\n  /**\n   * Updates all the active entities\n   * @param payload Update event data\n   * @returns void\n   */\n  public update(payload: UpdatePayload) {\n    const entities = this.entities\n\n    entities.forEach(entity => entity.isEnabled && entity.update(payload))\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"842318bb615dc21a8b923458da58a051ca02c966","contentHash":"8e187e3e1de3a0e9a8b044080799f84162bc9a97f2badcbecbf74b63b1456320"},"/home/convenia/Code/gigi/src/engine/index.js":{"path":"/home/convenia/Code/gigi/src/engine/index.js","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":32}},"3":{"start":{"line":5,"column":15},"end":{"line":5,"column":34}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":110}},"5":{"start":{"line":6,"column":80},"end":{"line":6,"column":104}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":50}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":50}},"8":{"start":{"line":9,"column":0},"end":{"line":9,"column":52}},"9":{"start":{"line":10,"column":0},"end":{"line":10,"column":53}},"10":{"start":{"line":11,"column":0},"end":{"line":11,"column":54}},"11":{"start":{"line":12,"column":0},"end":{"line":12,"column":51}},"12":{"start":{"line":13,"column":0},"end":{"line":13,"column":54}},"13":{"start":{"line":14,"column":0},"end":{"line":14,"column":52}},"14":{"start":{"line":15,"column":0},"end":{"line":15,"column":50}},"15":{"start":{"line":16,"column":0},"end":{"line":16,"column":49}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":66},"end":{"line":6,"column":67}},"loc":{"start":{"line":6,"column":78},"end":{"line":6,"column":106}},"line":6}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/index.js","sources":["/home/convenia/Code/gigi/src/engine/index.js"],"names":[],"mappings":";;;;AAAA,mCAA4C;AAAnC,gGAAA,OAAO,OAAU;AAC1B,kDAAuB;AACvB,kDAAuB;AACvB,oDAAyB;AACzB,qDAA0B;AAC1B,sDAA2B;AAC3B,mDAAwB;AACxB,sDAA2B;AAC3B,oDAAyB;AACzB,kDAAuB;AACvB,iDAAsB","sourcesContent":["export { default as Engine } from './Engine'\nexport * from './World'\nexport * from './Input'\nexport * from './NavMesh'\nexport * from './Renderer'\nexport * from './Resources'\nexport * from './Camera'\nexport * from './Messenger'\nexport * from './Network'\nexport * from './Debug'\nexport * from './Time'\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4e627e9b2f64a5622d5e6d6a18bc540786b514d5","contentHash":"ebb2f3f4f4def75d69ea9417147a33ce289ed13b62d6ce49547f4ae7364ae2d5"},"/home/convenia/Code/gigi/src/engine/Engine.ts":{"path":"/home/convenia/Code/gigi/src/engine/Engine.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":11},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":18},"end":{"line":5,"column":38}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":38}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":36}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":36}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":47}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":36}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":40}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":65}},"11":{"start":{"line":17,"column":8},"end":{"line":17,"column":27}},"12":{"start":{"line":18,"column":8},"end":{"line":18,"column":36}},"13":{"start":{"line":19,"column":8},"end":{"line":19,"column":26}},"14":{"start":{"line":20,"column":8},"end":{"line":20,"column":28}},"15":{"start":{"line":21,"column":8},"end":{"line":21,"column":26}},"16":{"start":{"line":22,"column":8},"end":{"line":22,"column":34}},"17":{"start":{"line":23,"column":8},"end":{"line":23,"column":35}},"18":{"start":{"line":26,"column":8},"end":{"line":26,"column":30}},"19":{"start":{"line":27,"column":8},"end":{"line":27,"column":32}},"20":{"start":{"line":28,"column":8},"end":{"line":28,"column":29}},"21":{"start":{"line":29,"column":8},"end":{"line":29,"column":31}},"22":{"start":{"line":30,"column":8},"end":{"line":30,"column":31}},"23":{"start":{"line":31,"column":8},"end":{"line":31,"column":29}},"24":{"start":{"line":34,"column":0},"end":{"line":34,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":18},"end":{"line":15,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":16,"column":4},"end":{"line":16,"column":5}},"loc":{"start":{"line":16,"column":24},"end":{"line":24,"column":5}},"line":16},"2":{"name":"(anonymous_2)","decl":{"start":{"line":25,"column":4},"end":{"line":25,"column":5}},"loc":{"start":{"line":25,"column":14},"end":{"line":32,"column":5}},"line":25}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1},"f":{"0":0,"1":0,"2":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/Engine.ts","sources":["/home/convenia/Code/gigi/src/engine/Engine.ts"],"names":[],"mappings":";;AAAA,yBAA4E;AAC5E,qCAAgC;AAChC,uCAA+B;AAE/B,MAAqB,MAAM;IASzB;QAPA,WAAM,GAAW,IAAI,SAAM,EAAE,CAAA;QAC7B,UAAK,GAAU,IAAI,QAAK,EAAE,CAAA;QAC1B,UAAK,GAAU,IAAI,QAAK,EAAE,CAAA;QAC1B,YAAO,GAAY,IAAI,iBAAO,EAAE,CAAA;QAChC,UAAK,GAAU,IAAI,QAAK,EAAE,CAAA;QAC1B,YAAO,GAAY,IAAI,UAAO,EAAE,CAAA;QAG9B,IAAI,CAAC,QAAQ,GAAG,IAAI,WAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;IACvD,CAAC;IAED,KAAK,CAAC,IAAI,CAAC,OAAoB;QAC7B,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAA;QAClB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;QAC3B,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAA;QACjB,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAA;QACnB,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAA;QACjB,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAA;QAEzB,UAAO,CAAC,cAAK,CAAC,CAAA;IAChB,CAAC;IAED,OAAO;QACL,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAA;QACrB,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAA;QACvB,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAA;QACpB,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAA;QACtB,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAA;QACtB,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAA;IACtB,CAAC;CACF;AAhCD,yBAgCC","sourcesContent":["import { World, Camera, Renderer, Input, NavMesh, Debug, publish } from './'\nimport { START } from './events'\nimport Network from './Network'\n\nexport default class Engine {\n  renderer: Renderer\n  camera: Camera = new Camera()\n  world: World = new World()\n  input: Input = new Input()\n  network: Network = new Network()\n  debug: Debug = new Debug()\n  navMesh: NavMesh = new NavMesh()\n\n  constructor() {\n    this.renderer = new Renderer(this.world, this.camera)\n  }\n\n  async init(element: HTMLElement) {\n    this.camera.init()\n    this.renderer.init(element)\n    this.input.init()\n    this.network.init()\n    this.world.init()\n    await this.navMesh.init()\n\n    publish(START)\n  }\n\n  destroy() {\n    this.camera.destroy()\n    this.renderer.destroy()\n    this.input.destroy()\n    this.navMesh.destroy()\n    this.network.destroy()\n    this.world.destroy()\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"be2b9078f4963cdf20bbc3718abfe4a94dc54112","contentHash":"cb3ffbeac1348d9b15c402577d864a511d1586efbe361125c5dd4b503aa6d703"},"/home/convenia/Code/gigi/src/engine/events.ts":{"path":"/home/convenia/Code/gigi/src/engine/events.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":32}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":31}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":33}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":57}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":59}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":60}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":58}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":57}},"10":{"start":{"line":12,"column":0},"end":{"line":12,"column":57}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/events.ts","sources":["/home/convenia/Code/gigi/src/engine/events.ts"],"names":[],"mappings":";;;;AAAa,QAAA,KAAK,GAAG,cAAc,CAAA;AACtB,QAAA,MAAM,GAAG,eAAe,CAAA;AAErC,yDAA8B;AAC9B,2DAAgC;AAChC,4DAAiC;AACjC,0DAA+B;AAC/B,yDAA8B;AAC9B,yDAA8B","sourcesContent":["export const START = 'engine/START'\nexport const RESIZE = 'engine/RESIZE'\n\nexport * from './World/events'\nexport * from './Network/events'\nexport * from './Renderer/events'\nexport * from './Camera/events'\nexport * from './Input/events'\nexport * from './Debug/events'\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4e7620dafbf0fd0a46dd8066445809113a68d7fb","contentHash":"76d5a0bad61da901928d9296274103f6c6c4019af43def76125310baa563635a"},"/home/convenia/Code/gigi/src/engine/World/events.ts":{"path":"/home/convenia/Code/gigi/src/engine/World/events.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":97}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":40}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":46}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":40}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":46}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/World/events.ts","sources":["/home/convenia/Code/gigi/src/engine/World/events.ts"],"names":[],"mappings":";;;AAAa,QAAA,UAAU,GAAG,kBAAkB,CAAA;AAC/B,QAAA,aAAa,GAAG,qBAAqB,CAAA;AACrC,QAAA,UAAU,GAAG,kBAAkB,CAAA;AAC/B,QAAA,aAAa,GAAG,qBAAqB,CAAA","sourcesContent":["export const ADD_OBJECT = 'world/ADD_OBJECT'\nexport const REMOVE_OBJECT = 'world/REMOVE_OBJECT'\nexport const ADD_ENTITY = 'world/ADD_ENTITY'\nexport const REMOVE_ENTITY = 'world/REMOVE_ENTITY'\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e5b836718ab6fb94903460ab1fb12602f0c905a9","contentHash":"44320de25fa839a54dd4d445c2cb1b370b9800b79e5bb12dcd6f37938748e236"},"/home/convenia/Code/gigi/src/engine/Network/events.ts":{"path":"/home/convenia/Code/gigi/src/engine/Network/events.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":111}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":54}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":60}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":48}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":46}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/Network/events.ts","sources":["/home/convenia/Code/gigi/src/engine/Network/events.ts"],"names":[],"mappings":";;;AAAa,QAAA,gBAAgB,GAAG,0BAA0B,CAAA;AAC7C,QAAA,mBAAmB,GAAG,6BAA6B,CAAA;AACnD,QAAA,aAAa,GAAG,uBAAuB,CAAA;AACvC,QAAA,YAAY,GAAG,sBAAsB,CAAA","sourcesContent":["export const PLAYER_CONNECTED = 'network/PLAYER_CONNECTED'\nexport const PLAYER_DISCONNECTED = 'network/PLAYER_DISCONNECTED'\nexport const PLAYER_JOINED = 'network/PLAYER_JOINED'\nexport const PLAYERS_INIT = 'network/PLAYERS_INIT'\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6cc4b603f83c7d33eb37acb15e33ae5d45215993","contentHash":"5a1054e50ee21c7cdb3dfc9e9de5ea5a64f51687981e0b5a959212528cbb79cf"},"/home/convenia/Code/gigi/src/engine/Renderer/events.ts":{"path":"/home/convenia/Code/gigi/src/engine/Renderer/events.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":108}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":35}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":31}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":40}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":48}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":46}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/Renderer/events.ts","sources":["/home/convenia/Code/gigi/src/engine/Renderer/events.ts"],"names":[],"mappings":";;;AAAa,QAAA,MAAM,GAAG,iBAAiB,CAAA;AAC1B,QAAA,IAAI,GAAG,eAAe,CAAA;AACtB,QAAA,aAAa,GAAG,eAAe,CAAA;AAC/B,QAAA,YAAY,GAAG,wBAAwB,CAAA;AACvC,QAAA,WAAW,GAAG,uBAAuB,CAAA","sourcesContent":["export const UPDATE = 'renderer/UPDATE'\nexport const DRAW = 'renderer/DRAW'\nexport const INIT_RENDERER = 'renderer/INIT'\nexport const WINDOW_FOCUS = 'renderer/WINDOWS_FOCUS'\nexport const WINDOW_BLUR = 'renderer/WINDOWS_BLUR'\n\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4c07ddee9311abbbdd477193a9f765269068685f","contentHash":"5348a41e25b8145591d3ccd70a2b2ec30cb28141c63afab3115dd57bd51306c4"},"/home/convenia/Code/gigi/src/engine/Camera/events.ts":{"path":"/home/convenia/Code/gigi/src/engine/Camera/events.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":36}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/Camera/events.ts","sources":["/home/convenia/Code/gigi/src/engine/Camera/events.ts"],"names":[],"mappings":";;;AAAa,QAAA,WAAW,GAAG,aAAa,CAAA","sourcesContent":["export const INIT_CAMERA = 'camera/INIT'\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fe279ec440150a7215adb14423a01a3757384f6b","contentHash":"0755ce0d5783417bcd051bfdaff9b6caf0c180eab1b141913a0dc758fc96eb93"},"/home/convenia/Code/gigi/src/engine/Input/events.ts":{"path":"/home/convenia/Code/gigi/src/engine/Input/events.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":95}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":44}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":42}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":44}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":38}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/Input/events.ts","sources":["/home/convenia/Code/gigi/src/engine/Input/events.ts"],"names":[],"mappings":";;;AAAa,QAAA,YAAY,GAAG,oBAAoB,CAAA;AACnC,QAAA,WAAW,GAAG,mBAAmB,CAAA;AACjC,QAAA,YAAY,GAAG,oBAAoB,CAAA;AACnC,QAAA,SAAS,GAAG,iBAAiB,CAAA","sourcesContent":["export const AXIS_CHANGED = 'input/AXIS_CHANGED'\nexport const BUTTON_DOWN = 'input/BUTTON_DOWN'\nexport const BUTTON_PRESS = 'input/BUTTON_PRESS'\nexport const BUTTON_UP = 'input/BUTTON_UP'\n\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3b27faf1af761ca4c5a40ec40361aad2ae08c782","contentHash":"041e7e15398de02bada1deff50d4ae6434c676bdfadf2c3f689d4f7176aa8823"},"/home/convenia/Code/gigi/src/engine/Debug/events.ts":{"path":"/home/convenia/Code/gigi/src/engine/Debug/events.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":34}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/Debug/events.ts","sources":["/home/convenia/Code/gigi/src/engine/Debug/events.ts"],"names":[],"mappings":";;;AAAa,QAAA,UAAU,GAAG,YAAY,CAAA","sourcesContent":["export const DEBUG_INIT = 'debug/INIT'\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0040ae8ed16a02c3aee8c50de6c1d17ba799a23c","contentHash":"91f40607e2afde1fda8be7f20447578a3b4176fbde2762a78b1ffaab42d7abd8"},"/home/convenia/Code/gigi/src/engine/Network/index.ts":{"path":"/home/convenia/Code/gigi/src/engine/Network/index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":27},"end":{"line":3,"column":54}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":32}},"3":{"start":{"line":5,"column":20},"end":{"line":5,"column":43}},"4":{"start":{"line":6,"column":17},"end":{"line":6,"column":36}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":26}},"6":{"start":{"line":10,"column":8},"end":{"line":13,"column":10}},"7":{"start":{"line":11,"column":12},"end":{"line":11,"column":31}},"8":{"start":{"line":12,"column":12},"end":{"line":12,"column":84}},"9":{"start":{"line":14,"column":8},"end":{"line":23,"column":10}},"10":{"start":{"line":16,"column":12},"end":{"line":21,"column":15}},"11":{"start":{"line":17,"column":16},"end":{"line":20,"column":17}},"12":{"start":{"line":18,"column":20},"end":{"line":18,"column":48}},"13":{"start":{"line":19,"column":20},"end":{"line":19,"column":50}},"14":{"start":{"line":22,"column":12},"end":{"line":22,"column":94}},"15":{"start":{"line":24,"column":8},"end":{"line":46,"column":10}},"16":{"start":{"line":26,"column":12},"end":{"line":45,"column":13}},"17":{"start":{"line":26,"column":25},"end":{"line":26,"column":26}},"18":{"start":{"line":27,"column":47},"end":{"line":27,"column":57}},"19":{"start":{"line":28,"column":31},"end":{"line":28,"column":78}},"20":{"start":{"line":28,"column":54},"end":{"line":28,"column":77}},"21":{"start":{"line":29,"column":16},"end":{"line":44,"column":17}},"22":{"start":{"line":30,"column":52},"end":{"line":30,"column":67}},"23":{"start":{"line":31,"column":52},"end":{"line":31,"column":60}},"24":{"start":{"line":32,"column":44},"end":{"line":32,"column":75}},"25":{"start":{"line":33,"column":42},"end":{"line":33,"column":73}},"26":{"start":{"line":34,"column":20},"end":{"line":39,"column":21}},"27":{"start":{"line":35,"column":42},"end":{"line":37,"column":40}},"28":{"start":{"line":38,"column":24},"end":{"line":38,"column":53}},"29":{"start":{"line":40,"column":20},"end":{"line":40,"column":47}},"30":{"start":{"line":43,"column":20},"end":{"line":43,"column":46}},"31":{"start":{"line":47,"column":8},"end":{"line":47,"column":85}},"32":{"start":{"line":50,"column":8},"end":{"line":50,"column":31}},"33":{"start":{"line":53,"column":8},"end":{"line":53,"column":36}},"34":{"start":{"line":54,"column":8},"end":{"line":54,"column":26}},"35":{"start":{"line":55,"column":8},"end":{"line":55,"column":25}},"36":{"start":{"line":56,"column":8},"end":{"line":56,"column":33}},"37":{"start":{"line":59,"column":8},"end":{"line":59,"column":54}},"38":{"start":{"line":60,"column":8},"end":{"line":60,"column":60}},"39":{"start":{"line":61,"column":8},"end":{"line":61,"column":48}},"40":{"start":{"line":62,"column":8},"end":{"line":62,"column":56}},"41":{"start":{"line":68,"column":8},"end":{"line":69,"column":19}},"42":{"start":{"line":69,"column":12},"end":{"line":69,"column":19}},"43":{"start":{"line":70,"column":8},"end":{"line":70,"column":34}},"44":{"start":{"line":71,"column":8},"end":{"line":71,"column":64}},"45":{"start":{"line":74,"column":8},"end":{"line":74,"column":43}},"46":{"start":{"line":77,"column":0},"end":{"line":77,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":18},"end":{"line":48,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":27},"end":{"line":10,"column":28}},"loc":{"start":{"line":10,"column":37},"end":{"line":13,"column":9}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":30},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":43},"end":{"line":23,"column":9}},"line":14},"3":{"name":"(anonymous_3)","decl":{"start":{"line":16,"column":33},"end":{"line":16,"column":34}},"loc":{"start":{"line":16,"column":52},"end":{"line":21,"column":13}},"line":16},"4":{"name":"(anonymous_4)","decl":{"start":{"line":24,"column":31},"end":{"line":24,"column":32}},"loc":{"start":{"line":24,"column":50},"end":{"line":46,"column":9}},"line":24},"5":{"name":"(anonymous_5)","decl":{"start":{"line":28,"column":49},"end":{"line":28,"column":50}},"loc":{"start":{"line":28,"column":54},"end":{"line":28,"column":77}},"line":28},"6":{"name":"(anonymous_6)","decl":{"start":{"line":49,"column":4},"end":{"line":49,"column":5}},"loc":{"start":{"line":49,"column":11},"end":{"line":51,"column":5}},"line":49},"7":{"name":"(anonymous_7)","decl":{"start":{"line":52,"column":4},"end":{"line":52,"column":5}},"loc":{"start":{"line":52,"column":14},"end":{"line":57,"column":5}},"line":52},"8":{"name":"(anonymous_8)","decl":{"start":{"line":58,"column":4},"end":{"line":58,"column":5}},"loc":{"start":{"line":58,"column":22},"end":{"line":63,"column":5}},"line":58},"9":{"name":"(anonymous_9)","decl":{"start":{"line":64,"column":4},"end":{"line":64,"column":5}},"loc":{"start":{"line":64,"column":27},"end":{"line":66,"column":5}},"line":64},"10":{"name":"(anonymous_10)","decl":{"start":{"line":67,"column":4},"end":{"line":67,"column":5}},"loc":{"start":{"line":67,"column":27},"end":{"line":72,"column":5}},"line":67},"11":{"name":"(anonymous_11)","decl":{"start":{"line":73,"column":4},"end":{"line":73,"column":5}},"loc":{"start":{"line":73,"column":35},"end":{"line":75,"column":5}},"line":73}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":16},"end":{"line":20,"column":17}},"type":"if","locations":[{"start":{"line":17,"column":16},"end":{"line":20,"column":17}},{"start":{"line":17,"column":16},"end":{"line":20,"column":17}}],"line":17},"1":{"loc":{"start":{"line":29,"column":16},"end":{"line":44,"column":17}},"type":"if","locations":[{"start":{"line":29,"column":16},"end":{"line":44,"column":17}},{"start":{"line":29,"column":16},"end":{"line":44,"column":17}}],"line":29},"2":{"loc":{"start":{"line":34,"column":20},"end":{"line":39,"column":21}},"type":"if","locations":[{"start":{"line":34,"column":20},"end":{"line":39,"column":21}},{"start":{"line":34,"column":20},"end":{"line":39,"column":21}}],"line":34},"3":{"loc":{"start":{"line":68,"column":8},"end":{"line":69,"column":19}},"type":"if","locations":[{"start":{"line":68,"column":8},"end":{"line":69,"column":19}},{"start":{"line":68,"column":8},"end":{"line":69,"column":19}}],"line":68}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/Network/index.ts","sources":["/home/convenia/Code/gigi/src/engine/Network/index.ts"],"names":[],"mappings":"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","sourcesContent":["import socketio from 'socket.io-client'\nimport { Vector3 } from 'three'\nimport { publish } from '../Messenger'\nimport { PLAYER_CONNECTED, PLAYER_DISCONNECTED, PLAYER_JOINED } from './events'\n\nexport default class Network {\n  socket: any\n  players: Array<any> = []\n  player: any\n\n  constructor() {\n    this.socket = socketio(process.env.VUE_APP_SERVER_ADDRESS)\n  }\n\n  init() {\n    this.createListeners()\n  }\n\n  destroy() {\n    this.unsubscribeListeners()\n    this.players = []\n    this.player = {}\n    this.socket.disconnect()\n  }\n\n  createListeners() {\n    this.socket.on('connected', this.onConnected)\n    this.socket.on('disconnected', this.onDisconnected)\n    this.socket.on('joined', this.onJoined)\n    this.socket.on('players', this.onPlayersUpdate)\n  }\n\n  unsubscribeListeners() {\n    // TODO\n  }\n\n  onConnected = (data: any) => {\n    this.player = data\n\n    publish(PLAYER_CONNECTED, { player: this.player })\n  }\n\n  onDisconnected = ({ who }: any) => {\n    let disconnectedPlayer\n\n    this.players.forEach((player: any, index: number) => {\n      if (player.socketId === who) {\n        disconnectedPlayer = player\n        this.players.splice(index, 1)\n      }\n    })\n\n    publish(PLAYER_DISCONNECTED, { player: disconnectedPlayer })\n  }\n \n  onPlayersUpdate = async (players: any) => {\n    // update existing positions\n    for (let i = 0; i < players.length; i++) {\n      const { socketId, position } = players[i]\n      const player = this.players.find(p => p.socketId === socketId)\n\n      if (player) {\n        const { x: x1, y: y1, z: z1 } = player.position\n        const { x: x2, y: y2, z: z2 } = position\n        const initialPosition = new Vector3(x1, y1, z1)\n        const finalPosition = new Vector3(x2, y2, z2)\n\n        if (initialPosition.clone().sub(finalPosition).lengthSq() > .1) {\n          const direction = initialPosition\n          .sub(finalPosition)\n          .normalize()\n\n          player.direction = direction\n        }\n\n        player.position = position\n      } else {\n        this.onJoined(players[i])\n      }\n    }\n  }\n\n  async onJoined (player: any) {\n    if (player.socketId === this.player.socketId) return\n\n    this.players.push(player)\n\n    publish(PLAYER_JOINED, { player })\n  }\n\n  updatePlayerPosition (position: Vector3) {\n    this.socket.emit('move', position)\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7e1dd10be1c72ac01ddb1809c98a3be17c254db0","contentHash":"c39ce6d0b0089265419ccb81d0faf267e7ac42b8df1612197acea4f780540bfe"},"/home/convenia/Code/gigi/src/engine/Messenger/index.js":{"path":"/home/convenia/Code/gigi/src/engine/Messenger/index.js","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":54}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":53}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/Messenger/index.js","sources":["/home/convenia/Code/gigi/src/engine/Messenger/index.js"],"names":[],"mappings":";;;AAAA,sDAA2B;AAC3B,qDAA0B","sourcesContent":["export * from './Messenger'\nexport * from './payloads'\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e35e1d5a91bef922555da513cac90c7a52d658ca","contentHash":"9758136f440d1cb567123af797b2a98024d024db75f855f57391b2f4f5801eb7"},"/home/convenia/Code/gigi/src/engine/Messenger/Messenger.js":{"path":"/home/convenia/Code/gigi/src/engine/Messenger/Messenger.js","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":67}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":32}},"3":{"start":{"line":5,"column":19},"end":{"line":5,"column":48}},"4":{"start":{"line":6,"column":16},"end":{"line":8,"column":1}},"5":{"start":{"line":7,"column":4},"end":{"line":7,"column":62}},"6":{"start":{"line":9,"column":0},"end":{"line":9,"column":26}},"7":{"start":{"line":10,"column":18},"end":{"line":12,"column":1}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":49}},"9":{"start":{"line":13,"column":0},"end":{"line":13,"column":30}},"10":{"start":{"line":14,"column":20},"end":{"line":16,"column":1}},"11":{"start":{"line":15,"column":4},"end":{"line":15,"column":52}},"12":{"start":{"line":17,"column":0},"end":{"line":17,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":16},"end":{"line":6,"column":17}},"loc":{"start":{"line":6,"column":32},"end":{"line":8,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":18},"end":{"line":10,"column":19}},"loc":{"start":{"line":10,"column":39},"end":{"line":12,"column":1}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":20},"end":{"line":14,"column":21}},"loc":{"start":{"line":14,"column":41},"end":{"line":16,"column":1}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":41},"end":{"line":7,"column":57}},"type":"cond-expr","locations":[{"start":{"line":7,"column":48},"end":{"line":7,"column":52}},{"start":{"line":7,"column":55},"end":{"line":7,"column":57}}],"line":7}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":1,"8":0,"9":1,"10":1,"11":0,"12":1},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/Messenger/Messenger.js","sources":["/home/convenia/Code/gigi/src/engine/Messenger/Messenger.js"],"names":[],"mappings":";;;AAAA,iCAAuC;AAEvC,MAAM,UAAU,GAAG,IAAI,uBAAe,EAAE,CAAA;AAEjC,MAAM,OAAO,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE;IACpC,UAAU,CAAC,aAAa,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAA;AAC3D,CAAC,CAAA;AAFY,QAAA,OAAO,WAEnB;AAEM,MAAM,SAAS,GAAG,CAAC,KAAK,EAAE,QAAQ,EAAE,EAAE;IAC3C,UAAU,CAAC,gBAAgB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAA;AAC9C,CAAC,CAAA;AAFY,QAAA,SAAS,aAErB;AAEM,MAAM,WAAW,GAAG,CAAC,KAAK,EAAE,QAAQ,EAAE,EAAE;IAC7C,UAAU,CAAC,mBAAmB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAA;AACjD,CAAC,CAAA;AAFY,QAAA,WAAW,eAEvB","sourcesContent":["import { EventDispatcher } from 'three'\n\nconst dispatcher = new EventDispatcher()\n\nexport const publish = (type, data) => {\n  dispatcher.dispatchEvent({ type, ...(data ? data : {}) })\n}\n\nexport const subscribe = (topic, callback) => {\n  dispatcher.addEventListener(topic, callback)\n}\n\nexport const unsubscribe = (topic, callback) => {\n  dispatcher.removeEventListener(topic, callback)\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2f1858d73894371cd3e9b8d4c0099f3f18944fa0","contentHash":"0d437ace4ede0ec39572111679eb64eb2508c5e865b5747d9704dd4b17cccfc9"},"/home/convenia/Code/gigi/src/engine/Messenger/payloads.ts":{"path":"/home/convenia/Code/gigi/src/engine/Messenger/payloads.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/Messenger/payloads.ts","sources":["/home/convenia/Code/gigi/src/engine/Messenger/payloads.ts"],"names":[],"mappings":"","sourcesContent":["import { EventDispatcher } from 'three'\n\nexport type EventPayload = {\n  type: string,\n  target: EventDispatcher\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6981e2a102ea3b8da8f064ae498b02dec7257f65","contentHash":"d60c4cb81803325a2368e5755ede820f0a4f329b874766aa327b584c24ec2ba7"},"/home/convenia/Code/gigi/src/engine/World/index.ts":{"path":"/home/convenia/Code/gigi/src/engine/World/index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":60}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":32}},"3":{"start":{"line":5,"column":18},"end":{"line":5,"column":40}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":116}},"5":{"start":{"line":6,"column":83},"end":{"line":6,"column":110}},"6":{"start":{"line":7,"column":15},"end":{"line":7,"column":34}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":110}},"8":{"start":{"line":8,"column":80},"end":{"line":8,"column":104}},"9":{"start":{"line":9,"column":14},"end":{"line":9,"column":32}},"10":{"start":{"line":10,"column":0},"end":{"line":10,"column":108}},"11":{"start":{"line":10,"column":79},"end":{"line":10,"column":102}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":51}},"13":{"start":{"line":12,"column":0},"end":{"line":12,"column":51}},"14":{"start":{"line":13,"column":0},"end":{"line":13,"column":53}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":69},"end":{"line":6,"column":70}},"loc":{"start":{"line":6,"column":81},"end":{"line":6,"column":112}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":66},"end":{"line":8,"column":67}},"loc":{"start":{"line":8,"column":78},"end":{"line":8,"column":106}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":10,"column":65},"end":{"line":10,"column":66}},"loc":{"start":{"line":10,"column":77},"end":{"line":10,"column":104}},"line":10}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1},"f":{"0":1,"1":1,"2":1},"b":{},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/World/index.ts","sources":["/home/convenia/Code/gigi/src/engine/World/index.ts"],"names":[],"mappings":";;;;AAAA,yCAAkD;AAAzC,sGAAA,OAAO,OAAa;AAC7B,mCAA4C;AAAnC,gGAAA,OAAO,OAAU;AAC1B,iCAA0C;AAAjC,8FAAA,OAAO,OAAS;AAEzB,mDAAwB;AACxB,mDAAwB;AACxB,qDAA0B","sourcesContent":["export { default as Component } from './Component'\nexport { default as Entity } from './Entity'\nexport { default as World } from './World'\n\nexport * from './layers'\nexport * from './events'\nexport * from './payloads'\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"34459868c639d699cd4a000f10119109ec884fc2","contentHash":"14c16681e64beaec4540dc25e51c928768b236befdf607bb558ad3224199cd81"},"/home/convenia/Code/gigi/src/engine/World/Component.ts":{"path":"/home/convenia/Code/gigi/src/engine/World/Component.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":28}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":31}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":58}},"5":{"start":{"line":8,"column":37},"end":{"line":8,"column":57}},"6":{"start":{"line":11,"column":8},"end":{"line":11,"column":54}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":52}},"8":{"start":{"line":13,"column":8},"end":{"line":13,"column":22}},"9":{"start":{"line":14,"column":8},"end":{"line":14,"column":32}},"10":{"start":{"line":17,"column":8},"end":{"line":17,"column":23}},"11":{"start":{"line":18,"column":8},"end":{"line":18,"column":56}},"12":{"start":{"line":19,"column":8},"end":{"line":19,"column":54}},"13":{"start":{"line":20,"column":8},"end":{"line":20,"column":34}},"14":{"start":{"line":24,"column":8},"end":{"line":24,"column":30}},"15":{"start":{"line":25,"column":8},"end":{"line":25,"column":35}},"16":{"start":{"line":28,"column":8},"end":{"line":28,"column":31}},"17":{"start":{"line":29,"column":8},"end":{"line":29,"column":34}},"18":{"start":{"line":34,"column":8},"end":{"line":34,"column":46}},"19":{"start":{"line":37,"column":8},"end":{"line":37,"column":60}},"20":{"start":{"line":40,"column":8},"end":{"line":40,"column":49}},"21":{"start":{"line":43,"column":0},"end":{"line":43,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":18},"end":{"line":9,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":25},"end":{"line":8,"column":26}},"loc":{"start":{"line":8,"column":37},"end":{"line":8,"column":57}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":12},"end":{"line":15,"column":5}},"line":10},"3":{"name":"(anonymous_3)","decl":{"start":{"line":16,"column":4},"end":{"line":16,"column":5}},"loc":{"start":{"line":16,"column":14},"end":{"line":21,"column":5}},"line":16},"4":{"name":"(anonymous_4)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":20},"end":{"line":22,"column":23}},"line":22},"5":{"name":"(anonymous_5)","decl":{"start":{"line":23,"column":4},"end":{"line":23,"column":5}},"loc":{"start":{"line":23,"column":13},"end":{"line":26,"column":5}},"line":23},"6":{"name":"(anonymous_6)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":14},"end":{"line":30,"column":5}},"line":27},"7":{"name":"(anonymous_7)","decl":{"start":{"line":31,"column":4},"end":{"line":31,"column":5}},"loc":{"start":{"line":31,"column":17},"end":{"line":31,"column":20}},"line":31},"8":{"name":"(anonymous_8)","decl":{"start":{"line":32,"column":4},"end":{"line":32,"column":5}},"loc":{"start":{"line":32,"column":16},"end":{"line":32,"column":19}},"line":32},"9":{"name":"(anonymous_9)","decl":{"start":{"line":33,"column":4},"end":{"line":33,"column":5}},"loc":{"start":{"line":33,"column":30},"end":{"line":35,"column":5}},"line":33},"10":{"name":"(anonymous_10)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":24},"end":{"line":38,"column":5}},"line":36},"11":{"name":"(anonymous_11)","decl":{"start":{"line":39,"column":4},"end":{"line":39,"column":5}},"loc":{"start":{"line":39,"column":32},"end":{"line":41,"column":5}},"line":39}},"branchMap":{"0":{"loc":{"start":{"line":37,"column":39},"end":{"line":37,"column":55}},"type":"cond-expr","locations":[{"start":{"line":37,"column":46},"end":{"line":37,"column":50}},{"start":{"line":37,"column":53},"end":{"line":37,"column":55}}],"line":37}},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/World/Component.ts","sources":["/home/convenia/Code/gigi/src/engine/World/Component.ts"],"names":[],"mappings":";;AAAA,iCAAuC;AAKvC,MAAqB,SAAU,SAAQ,uBAAe;IAAtD;;QACE,cAAS,GAAY,KAAK,CAAA;QAG1B,cAAS,GAAG,CAAC,MAAc,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;IA0CtD,CAAC;IAxCC,KAAK;QACH,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;QAC7C,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAA;QAC3C,IAAI,CAAC,MAAM,EAAE,CAAA;QACb,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAA;IACzB,CAAC;IAED,OAAO;QACL,IAAI,CAAC,OAAO,EAAE,CAAA;QACd,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;QAC/C,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAA;QAC7C,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAA;IAC3B,CAAC;IAED,MAAM,CAAC,OAAsB,IAAU,CAAC;IAExC,MAAM;QACJ,IAAI,CAAC,SAAS,GAAG,IAAI,CAAA;QACrB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAA;IAC5B,CAAC;IAED,OAAO;QACL,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;QACtB,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAA;IAC3B,CAAC;IAED,UAAU,KAAW,CAAC;IACtB,SAAS,KAAW,CAAC;IAErB,SAAS,CAAE,IAAY,EAAE,QAA8B;QACrD,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAA;IACvC,CAAC;IAED,OAAO,CAAE,IAAY,EAAE,IAAU;QAC/B,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAA;IACrD,CAAC;IAED,WAAW,CAAC,IAAY,EAAE,QAA8B;QACtD,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAA;IAC1C,CAAC;CACF;AA9CD,4BA8CC","sourcesContent":["import { EventDispatcher } from 'three'\nimport { UpdatePayload } from '@/engine'\nimport { IStartable, IDestroyable, IActivatable, IUpdatable } from '../interfaces'\nimport Entity from './Entity'\n\nexport default class Component extends EventDispatcher implements IStartable, IDestroyable, IActivatable, IUpdatable {\n  isEnabled: boolean = false\n  entity?: Entity\n\n  setEntity = (entity: Entity) => this.entity = entity\n\n  start() {\n    this.subscribe('onActivate', this.onActivate)\n    this.subscribe('onDisable', this.onDisable)\n    this.enable()\n    this.publish('onStart')\n  }\n\n  destroy() {\n    this.disable()\n    this.unsubscribe('onActivate', this.onActivate)\n    this.unsubscribe('onDisable', this.onDisable)\n    this.publish('onDestroy')\n  }\n\n  update(payload: UpdatePayload): void { }\n\n  enable() {\n    this.isEnabled = true\n    this.publish('onActivate')\n  }\n\n  disable() {\n    this.isEnabled = false\n    this.publish('onDisable')\n  }\n\n  onActivate(): void { }\n  onDisable(): void { }\n\n  subscribe (type: string, callback: (value: any) => void): void {\n    this.addEventListener(type, callback)\n  }\n\n  publish (type: string, data?: any): void {\n    this.dispatchEvent({ type, ...(data ? data : {}) })\n  }\n\n  unsubscribe(type: string, callback: (value: any) => void): void {\n    this.removeEventListener(type, callback)\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d16923965e3b203f829c6653434e7c47a8af4bd1","contentHash":"05fe9ab9f31ee83f0b7d63cd69c1c1a2ccfbd1cde6340c919404c90e162b6127"},"/home/convenia/Code/gigi/src/engine/World/Entity.ts":{"path":"/home/convenia/Code/gigi/src/engine/World/Entity.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":12},"end":{"line":4,"column":26}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":36}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":28}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":31}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":29}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":29}},"8":{"start":{"line":14,"column":8},"end":{"line":14,"column":52}},"9":{"start":{"line":14,"column":41},"end":{"line":14,"column":50}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":34}},"11":{"start":{"line":16,"column":8},"end":{"line":16,"column":61}},"12":{"start":{"line":17,"column":8},"end":{"line":17,"column":22}},"13":{"start":{"line":23,"column":8},"end":{"line":23,"column":52}},"14":{"start":{"line":26,"column":8},"end":{"line":26,"column":95}},"15":{"start":{"line":26,"column":45},"end":{"line":26,"column":93}},"16":{"start":{"line":29,"column":26},"end":{"line":29,"column":70}},"17":{"start":{"line":29,"column":52},"end":{"line":29,"column":69}},"18":{"start":{"line":30,"column":8},"end":{"line":31,"column":72}},"19":{"start":{"line":31,"column":12},"end":{"line":31,"column":72}},"20":{"start":{"line":32,"column":8},"end":{"line":32,"column":25}},"21":{"start":{"line":35,"column":21},"end":{"line":35,"column":47}},"22":{"start":{"line":36,"column":22},"end":{"line":36,"column":81}},"23":{"start":{"line":36,"column":53},"end":{"line":36,"column":80}},"24":{"start":{"line":37,"column":8},"end":{"line":38,"column":73}},"25":{"start":{"line":38,"column":12},"end":{"line":38,"column":73}},"26":{"start":{"line":39,"column":8},"end":{"line":39,"column":34}},"27":{"start":{"line":40,"column":8},"end":{"line":40,"column":26}},"28":{"start":{"line":41,"column":8},"end":{"line":41,"column":40}},"29":{"start":{"line":42,"column":8},"end":{"line":42,"column":25}},"30":{"start":{"line":48,"column":8},"end":{"line":48,"column":28}},"31":{"start":{"line":49,"column":8},"end":{"line":49,"column":30}},"32":{"start":{"line":50,"column":8},"end":{"line":50,"column":50}},"33":{"start":{"line":53,"column":8},"end":{"line":53,"column":29}},"34":{"start":{"line":54,"column":8},"end":{"line":54,"column":31}},"35":{"start":{"line":55,"column":8},"end":{"line":55,"column":51}},"36":{"start":{"line":58,"column":8},"end":{"line":58,"column":46}},"37":{"start":{"line":61,"column":8},"end":{"line":61,"column":60}},"38":{"start":{"line":64,"column":8},"end":{"line":64,"column":49}},"39":{"start":{"line":67,"column":0},"end":{"line":67,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":18},"end":{"line":11,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":45},"end":{"line":18,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":34},"end":{"line":14,"column":35}},"loc":{"start":{"line":14,"column":41},"end":{"line":14,"column":50}},"line":14},"3":{"name":"(anonymous_3)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":18},"end":{"line":21,"column":5}},"line":19},"4":{"name":"(anonymous_4)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":14},"end":{"line":24,"column":5}},"line":22},"5":{"name":"(anonymous_5)","decl":{"start":{"line":25,"column":4},"end":{"line":25,"column":5}},"loc":{"start":{"line":25,"column":20},"end":{"line":27,"column":5}},"line":25},"6":{"name":"(anonymous_6)","decl":{"start":{"line":26,"column":32},"end":{"line":26,"column":33}},"loc":{"start":{"line":26,"column":45},"end":{"line":26,"column":93}},"line":26},"7":{"name":"(anonymous_7)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":23},"end":{"line":33,"column":5}},"line":28},"8":{"name":"(anonymous_8)","decl":{"start":{"line":29,"column":47},"end":{"line":29,"column":48}},"loc":{"start":{"line":29,"column":52},"end":{"line":29,"column":69}},"line":29},"9":{"name":"(anonymous_9)","decl":{"start":{"line":34,"column":4},"end":{"line":34,"column":5}},"loc":{"start":{"line":34,"column":28},"end":{"line":43,"column":5}},"line":34},"10":{"name":"(anonymous_10)","decl":{"start":{"line":36,"column":48},"end":{"line":36,"column":49}},"loc":{"start":{"line":36,"column":53},"end":{"line":36,"column":80}},"line":36},"11":{"name":"(anonymous_11)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":26},"end":{"line":46,"column":5}},"line":44},"12":{"name":"(anonymous_12)","decl":{"start":{"line":47,"column":4},"end":{"line":47,"column":5}},"loc":{"start":{"line":47,"column":13},"end":{"line":51,"column":5}},"line":47},"13":{"name":"(anonymous_13)","decl":{"start":{"line":52,"column":4},"end":{"line":52,"column":5}},"loc":{"start":{"line":52,"column":14},"end":{"line":56,"column":5}},"line":52},"14":{"name":"(anonymous_14)","decl":{"start":{"line":57,"column":4},"end":{"line":57,"column":5}},"loc":{"start":{"line":57,"column":30},"end":{"line":59,"column":5}},"line":57},"15":{"name":"(anonymous_15)","decl":{"start":{"line":60,"column":4},"end":{"line":60,"column":5}},"loc":{"start":{"line":60,"column":24},"end":{"line":62,"column":5}},"line":60},"16":{"name":"(anonymous_16)","decl":{"start":{"line":63,"column":4},"end":{"line":63,"column":5}},"loc":{"start":{"line":63,"column":32},"end":{"line":65,"column":5}},"line":63}},"branchMap":{"0":{"loc":{"start":{"line":26,"column":45},"end":{"line":26,"column":93}},"type":"binary-expr","locations":[{"start":{"line":26,"column":45},"end":{"line":26,"column":64}},{"start":{"line":26,"column":68},"end":{"line":26,"column":93}}],"line":26},"1":{"loc":{"start":{"line":30,"column":8},"end":{"line":31,"column":72}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":31,"column":72}},{"start":{"line":30,"column":8},"end":{"line":31,"column":72}}],"line":30},"2":{"loc":{"start":{"line":37,"column":8},"end":{"line":38,"column":73}},"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":38,"column":73}},{"start":{"line":37,"column":8},"end":{"line":38,"column":73}}],"line":37},"3":{"loc":{"start":{"line":61,"column":39},"end":{"line":61,"column":55}},"type":"cond-expr","locations":[{"start":{"line":61,"column":46},"end":{"line":61,"column":50}},{"start":{"line":61,"column":53},"end":{"line":61,"column":55}}],"line":61}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/World/Entity.ts","sources":["/home/convenia/Code/gigi/src/engine/World/Entity.ts"],"names":[],"mappings":"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","sourcesContent":["import { Object3D } from 'three'\nimport { IStartable, IDestroyable, IActivatable, IUpdatable } from '../interfaces'\nimport { UpdatePayload, publish } from '../'\nimport { ADD_ENTITY } from './events'\nimport Component from './Component'\n\nexport default class Entity extends Object3D implements IStartable, IDestroyable, IActivatable, IUpdatable {\n  isEnabled: boolean = false\n  components: Array<Component> = []\n\n  static async Instantiate(entity: Entity, parent: Object3D): Promise<Entity> {\n    await entity.start()\n\n    entity.components.forEach((c: Component) => c.start())\n    entity.publish('started')\n\n    publish(ADD_ENTITY, { entity, parent })\n\n    return entity\n  }\n\n  async start(): Promise<void> {\n    //\n  }\n\n  destroy (): void {\n    this.publish('destroyed', { entity: this })\n  } \n\n  public update(payload: UpdatePayload): void {\n    this.components.forEach(component =>\n      component.isEnabled && component.update(payload)\n    )\n  }\n\n  public getComponent<T extends Component>(type: (new () => T)): T {\n    const component = this.components.find(c => c instanceof type) as T\n    \n    if (!component)\n      throw new Error(`Could not find component of type ${type}`)\n\n    return component\n  }\n\n  public addComponent<T extends Component>(component: T): T {\n    const type: string = component.constructor.name\n    const index = this.components.findIndex(c => c.constructor.name === type)\n\n    if (index >= 0)\n      throw new Error(`Component of type ${type} already extists`)\n\n    component.setEntity(this)\n    component.start()\n    this.components.push(component)\n\n    return component\n  }\n\n  public removeComponent<T extends Component>(type: (new () => T)): void {\n    // TODO\n  }\n\n  enable() {\n    this.visible = true\n    this.isEnabled = true\n    this.publish('enabled', { entity: this })\n  }\n\n  disable() {\n    this.visible = false\n    this.isEnabled = false\n    this.publish('disabled', { entity: this })\n  }\n\n  subscribe (type: string, callback: (value: any) => void): void {\n    this.addEventListener(type, callback)\n  }\n\n  publish (type: string, data?: any): void {\n    this.dispatchEvent({ type, ...(data ? data : {}) })\n  }\n\n  unsubscribe(type: string, callback: (value: any) => void): void {\n    this.removeEventListener(type, callback)\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"833267d4d0f80e6ee05e2b200e86a488a65c3466","contentHash":"892116b7133d0d5f8f4c806ffb59f732ef8364040497ed227c1b943d57fd5026"},"/home/convenia/Code/gigi/src/engine/World/layers.ts":{"path":"/home/convenia/Code/gigi/src/engine/World/layers.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":101}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":26}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":24}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":24}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":28}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/World/layers.ts","sources":["/home/convenia/Code/gigi/src/engine/World/layers.ts"],"names":[],"mappings":";;;AAAa,QAAA,aAAa,GAAG,CAAC,CAAA;AACjB,QAAA,WAAW,GAAG,CAAC,CAAA;AACf,QAAA,WAAW,GAAG,CAAC,CAAA;AACf,QAAA,eAAe,GAAG,CAAC,CAAA","sourcesContent":["export const DEFAULT_LAYER = 0\nexport const BLOOM_LAYER = 1\nexport const DEBUG_LAYER = 2\nexport const COLLISION_LAYER = 3\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a672d601344d8c00211f290a331f6326a3b8fe31","contentHash":"a2122f5ec923a77e9afd73317147b8006adb01f183bb4f531882933f87d87e9a"},"/home/convenia/Code/gigi/src/engine/World/payloads.ts":{"path":"/home/convenia/Code/gigi/src/engine/World/payloads.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/World/payloads.ts","sources":["/home/convenia/Code/gigi/src/engine/World/payloads.ts"],"names":[],"mappings":"","sourcesContent":["import { Object3D } from 'three'\nimport { EventPayload, Entity } from '@/engine'\n\nexport type Object3DPayload = EventPayload & {\n  object: Object3D\n}\n\nexport type EntityPayload = EventPayload & {\n  entity: Entity\n  parent?: Object3D\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c1ba360b3868d4304fb9081e79218d17189cc830","contentHash":"dc207a7db1b217a681840bdefac3a7ba34516448fd0a9ef472a6cf7f7149567e"},"/home/convenia/Code/gigi/src/engine/Input/index.js":{"path":"/home/convenia/Code/gigi/src/engine/Input/index.js","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":32}},"3":{"start":{"line":5,"column":14},"end":{"line":5,"column":32}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":108}},"5":{"start":{"line":6,"column":79},"end":{"line":6,"column":102}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":65},"end":{"line":6,"column":66}},"loc":{"start":{"line":6,"column":77},"end":{"line":6,"column":104}},"line":6}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/Input/index.js","sources":["/home/convenia/Code/gigi/src/engine/Input/index.js"],"names":[],"mappings":";;;;AAAA,iCAA0C;AAAjC,8FAAA,OAAO,OAAS;AACzB,kDAAuB","sourcesContent":["export { default as Input } from './Input'\nexport * from './Input'"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"39d5ceeadd4bf70d93297173c2fcceeb94df7053","contentHash":"7f24f83729ef675449131aa01113d6fb9c07570ed4d54604f7da1b136d4a6d8a"},"/home/convenia/Code/gigi/src/engine/Input/Input.js":{"path":"/home/convenia/Code/gigi/src/engine/Input/Input.js","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":191}},"2":{"start":{"line":4,"column":14},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":32}},"4":{"start":{"line":6,"column":22},"end":{"line":6,"column":44}},"5":{"start":{"line":7,"column":17},"end":{"line":7,"column":36}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":44}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":48}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":38}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":44}},"10":{"start":{"line":12,"column":0},"end":{"line":12,"column":42}},"11":{"start":{"line":13,"column":0},"end":{"line":13,"column":42}},"12":{"start":{"line":14,"column":0},"end":{"line":14,"column":48}},"13":{"start":{"line":15,"column":0},"end":{"line":15,"column":46}},"14":{"start":{"line":18,"column":8},"end":{"line":41,"column":11}},"15":{"start":{"line":42,"column":8},"end":{"line":42,"column":59}},"16":{"start":{"line":42,"column":31},"end":{"line":42,"column":58}},"17":{"start":{"line":43,"column":8},"end":{"line":43,"column":73}},"18":{"start":{"line":43,"column":36},"end":{"line":43,"column":72}},"19":{"start":{"line":44,"column":8},"end":{"line":57,"column":10}},"20":{"start":{"line":45,"column":12},"end":{"line":56,"column":13}},"21":{"start":{"line":46,"column":29},"end":{"line":46,"column":51}},"22":{"start":{"line":47,"column":16},"end":{"line":48,"column":67}},"23":{"start":{"line":48,"column":20},"end":{"line":48,"column":67}},"24":{"start":{"line":49,"column":16},"end":{"line":50,"column":68}},"25":{"start":{"line":50,"column":20},"end":{"line":50,"column":68}},"26":{"start":{"line":51,"column":16},"end":{"line":52,"column":67}},"27":{"start":{"line":52,"column":20},"end":{"line":52,"column":67}},"28":{"start":{"line":53,"column":16},"end":{"line":54,"column":68}},"29":{"start":{"line":54,"column":20},"end":{"line":54,"column":68}},"30":{"start":{"line":55,"column":16},"end":{"line":55,"column":97}},"31":{"start":{"line":58,"column":8},"end":{"line":72,"column":10}},"32":{"start":{"line":59,"column":12},"end":{"line":60,"column":23}},"33":{"start":{"line":60,"column":16},"end":{"line":60,"column":23}},"34":{"start":{"line":61,"column":28},"end":{"line":61,"column":33}},"35":{"start":{"line":62,"column":12},"end":{"line":71,"column":13}},"36":{"start":{"line":63,"column":35},"end":{"line":63,"column":61}},"37":{"start":{"line":64,"column":16},"end":{"line":65,"column":29}},"38":{"start":{"line":65,"column":20},"end":{"line":65,"column":29}},"39":{"start":{"line":66,"column":16},"end":{"line":67,"column":53}},"40":{"start":{"line":67,"column":20},"end":{"line":67,"column":53}},"41":{"start":{"line":68,"column":16},"end":{"line":69,"column":44}},"42":{"start":{"line":69,"column":20},"end":{"line":69,"column":44}},"43":{"start":{"line":70,"column":16},"end":{"line":70,"column":60}},"44":{"start":{"line":73,"column":8},"end":{"line":87,"column":10}},"45":{"start":{"line":74,"column":28},"end":{"line":74,"column":33}},"46":{"start":{"line":75,"column":12},"end":{"line":86,"column":13}},"47":{"start":{"line":76,"column":29},"end":{"line":76,"column":55}},"48":{"start":{"line":77,"column":30},"end":{"line":77,"column":65}},"49":{"start":{"line":78,"column":16},"end":{"line":79,"column":29}},"50":{"start":{"line":79,"column":20},"end":{"line":79,"column":29}},"51":{"start":{"line":80,"column":16},"end":{"line":81,"column":29}},"52":{"start":{"line":81,"column":20},"end":{"line":81,"column":29}},"53":{"start":{"line":82,"column":16},"end":{"line":82,"column":53}},"54":{"start":{"line":83,"column":16},"end":{"line":84,"column":44}},"55":{"start":{"line":84,"column":20},"end":{"line":84,"column":44}},"56":{"start":{"line":85,"column":16},"end":{"line":85,"column":70}},"57":{"start":{"line":88,"column":8},"end":{"line":91,"column":10}},"58":{"start":{"line":89,"column":12},"end":{"line":89,"column":37}},"59":{"start":{"line":90,"column":12},"end":{"line":90,"column":70}},"60":{"start":{"line":94,"column":8},"end":{"line":94,"column":61}},"61":{"start":{"line":95,"column":8},"end":{"line":95,"column":57}},"62":{"start":{"line":96,"column":8},"end":{"line":96,"column":52}},"63":{"start":{"line":99,"column":8},"end":{"line":99,"column":64}},"64":{"start":{"line":100,"column":8},"end":{"line":100,"column":60}},"65":{"start":{"line":103,"column":8},"end":{"line":103,"column":48}},"66":{"start":{"line":104,"column":8},"end":{"line":104,"column":81}},"67":{"start":{"line":107,"column":0},"end":{"line":107,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":18},"end":{"line":92,"column":5}},"line":17},"1":{"name":"(anonymous_1)","decl":{"start":{"line":42,"column":23},"end":{"line":42,"column":24}},"loc":{"start":{"line":42,"column":31},"end":{"line":42,"column":58}},"line":42},"2":{"name":"(anonymous_2)","decl":{"start":{"line":43,"column":26},"end":{"line":43,"column":27}},"loc":{"start":{"line":43,"column":36},"end":{"line":43,"column":72}},"line":43},"3":{"name":"(anonymous_3)","decl":{"start":{"line":44,"column":26},"end":{"line":44,"column":27}},"loc":{"start":{"line":44,"column":38},"end":{"line":57,"column":9}},"line":44},"4":{"name":"(anonymous_4)","decl":{"start":{"line":58,"column":25},"end":{"line":58,"column":26}},"loc":{"start":{"line":58,"column":36},"end":{"line":72,"column":9}},"line":58},"5":{"name":"(anonymous_5)","decl":{"start":{"line":73,"column":23},"end":{"line":73,"column":24}},"loc":{"start":{"line":73,"column":34},"end":{"line":87,"column":9}},"line":73},"6":{"name":"(anonymous_6)","decl":{"start":{"line":88,"column":21},"end":{"line":88,"column":22}},"loc":{"start":{"line":88,"column":27},"end":{"line":91,"column":9}},"line":88},"7":{"name":"(anonymous_7)","decl":{"start":{"line":93,"column":4},"end":{"line":93,"column":5}},"loc":{"start":{"line":93,"column":11},"end":{"line":97,"column":5}},"line":93},"8":{"name":"(anonymous_8)","decl":{"start":{"line":98,"column":4},"end":{"line":98,"column":5}},"loc":{"start":{"line":98,"column":14},"end":{"line":101,"column":5}},"line":98},"9":{"name":"(anonymous_9)","decl":{"start":{"line":102,"column":4},"end":{"line":102,"column":5}},"loc":{"start":{"line":102,"column":29},"end":{"line":105,"column":5}},"line":102}},"branchMap":{"0":{"loc":{"start":{"line":47,"column":16},"end":{"line":48,"column":67}},"type":"if","locations":[{"start":{"line":47,"column":16},"end":{"line":48,"column":67}},{"start":{"line":47,"column":16},"end":{"line":48,"column":67}}],"line":47},"1":{"loc":{"start":{"line":48,"column":35},"end":{"line":48,"column":66}},"type":"cond-expr","locations":[{"start":{"line":48,"column":61},"end":{"line":48,"column":62}},{"start":{"line":48,"column":65},"end":{"line":48,"column":66}}],"line":48},"2":{"loc":{"start":{"line":49,"column":16},"end":{"line":50,"column":68}},"type":"if","locations":[{"start":{"line":49,"column":16},"end":{"line":50,"column":68}},{"start":{"line":49,"column":16},"end":{"line":50,"column":68}}],"line":49},"3":{"loc":{"start":{"line":50,"column":35},"end":{"line":50,"column":67}},"type":"cond-expr","locations":[{"start":{"line":50,"column":61},"end":{"line":50,"column":63}},{"start":{"line":50,"column":66},"end":{"line":50,"column":67}}],"line":50},"4":{"loc":{"start":{"line":51,"column":16},"end":{"line":52,"column":67}},"type":"if","locations":[{"start":{"line":51,"column":16},"end":{"line":52,"column":67}},{"start":{"line":51,"column":16},"end":{"line":52,"column":67}}],"line":51},"5":{"loc":{"start":{"line":52,"column":35},"end":{"line":52,"column":66}},"type":"cond-expr","locations":[{"start":{"line":52,"column":61},"end":{"line":52,"column":62}},{"start":{"line":52,"column":65},"end":{"line":52,"column":66}}],"line":52},"6":{"loc":{"start":{"line":53,"column":16},"end":{"line":54,"column":68}},"type":"if","locations":[{"start":{"line":53,"column":16},"end":{"line":54,"column":68}},{"start":{"line":53,"column":16},"end":{"line":54,"column":68}}],"line":53},"7":{"loc":{"start":{"line":54,"column":35},"end":{"line":54,"column":67}},"type":"cond-expr","locations":[{"start":{"line":54,"column":61},"end":{"line":54,"column":63}},{"start":{"line":54,"column":66},"end":{"line":54,"column":67}}],"line":54},"8":{"loc":{"start":{"line":59,"column":12},"end":{"line":60,"column":23}},"type":"if","locations":[{"start":{"line":59,"column":12},"end":{"line":60,"column":23}},{"start":{"line":59,"column":12},"end":{"line":60,"column":23}}],"line":59},"9":{"loc":{"start":{"line":64,"column":16},"end":{"line":65,"column":29}},"type":"if","locations":[{"start":{"line":64,"column":16},"end":{"line":65,"column":29}},{"start":{"line":64,"column":16},"end":{"line":65,"column":29}}],"line":64},"10":{"loc":{"start":{"line":66,"column":16},"end":{"line":67,"column":53}},"type":"if","locations":[{"start":{"line":66,"column":16},"end":{"line":67,"column":53}},{"start":{"line":66,"column":16},"end":{"line":67,"column":53}}],"line":66},"11":{"loc":{"start":{"line":68,"column":16},"end":{"line":69,"column":44}},"type":"if","locations":[{"start":{"line":68,"column":16},"end":{"line":69,"column":44}},{"start":{"line":68,"column":16},"end":{"line":69,"column":44}}],"line":68},"12":{"loc":{"start":{"line":78,"column":16},"end":{"line":79,"column":29}},"type":"if","locations":[{"start":{"line":78,"column":16},"end":{"line":79,"column":29}},{"start":{"line":78,"column":16},"end":{"line":79,"column":29}}],"line":78},"13":{"loc":{"start":{"line":80,"column":16},"end":{"line":81,"column":29}},"type":"if","locations":[{"start":{"line":80,"column":16},"end":{"line":81,"column":29}},{"start":{"line":80,"column":16},"end":{"line":81,"column":29}}],"line":80},"14":{"loc":{"start":{"line":83,"column":16},"end":{"line":84,"column":44}},"type":"if","locations":[{"start":{"line":83,"column":16},"end":{"line":84,"column":44}},{"start":{"line":83,"column":16},"end":{"line":84,"column":44}}],"line":83}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0]},"inputSourceMap":{"version":3,"file":"/home/convenia/Code/gigi/src/engine/Input/Input.js","sources":["/home/convenia/Code/gigi/src/engine/Input/Input.js"],"names":[],"mappings":"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","sourcesContent":["import { reactive } from 'vue'\nimport { Vector2 } from 'three'\nimport { publish } from '@GMessenger'\nimport { AXIS_CHANGED, BUTTON_DOWN, BUTTON_PRESS, BUTTON_UP } from './events'\n\nexport const PRIMARY_AXIS = 'input/PRIMARY_AXIS'\nexport const SECONDARY_AXIS = 'input/SECONDARY_AXIS'\nexport const UP_BUTTON = 'input/UP_BUTTON'\nexport const RIGHT_BUTTON = 'input/RIGHT_BUTTON'\nexport const DOWN_BUTTON = 'input/DOWN_BUTTON'\nexport const LEFT_BUTTON = 'input/LEFT_BUTTON'\nexport const CONFIRM_BUTTON = 'input/CONFIRM_BUTTON'\nexport const CANCEL_BUTTON = 'input/CANCEL_BUTTON'\n\nexport default class Input {\n  state = reactive({\n    axes: {\n      [PRIMARY_AXIS]: {\n        value: new Vector2(),\n        vertical: {\n          positive: [UP_BUTTON],\n          negative: [DOWN_BUTTON],\n        },\n        horizontal: {\n          positive: [RIGHT_BUTTON],\n          negative: [LEFT_BUTTON],\n        }\n      }\n    },\n\n    buttons: {\n      [UP_BUTTON]: ['w', 'W', 'ArrowUp'],\n      [DOWN_BUTTON]: ['s', 'S', 'ArrowDown'],\n      [LEFT_BUTTON]: ['a', 'A', 'ArrowLeft'],\n      [RIGHT_BUTTON]: ['d', 'D', 'ArrowRight'],\n      [CONFIRM_BUTTON]: ['space'],\n      [CANCEL_BUTTON]: ['esc']\n    },\n\n    pressing: [],\n  })\n\n  getAxis = axis => this.state.axes[axis].value\n  isPressing = button => this.state.pressing.includes(button)\n\n  init () {\n    document.addEventListener('keydown', this.onKeyDown)\n    document.addEventListener('keyup', this.onKeyUp)\n    window.addEventListener('blur', this.reset)\n  }\n\n  destroy () {\n    document.removeEventListener('keydown', this.onKeyDown)\n    document.removeEventListener('keyup', this.onKeyUp)\n  }\n\n  changeAxis = (button) => {\n    for (const topic in this.state.axes) {\n      const axis = this.state.axes[topic]\n\n      if (axis.vertical.positive.includes(button))\n        axis.value.y = this.isPressing(button) ? 1 : 0\n      if (axis.vertical.negative.includes(button))\n        axis.value.y = this.isPressing(button) ? -1 : 0\n      if (axis.horizontal.positive.includes(button))\n        axis.value.x = this.isPressing(button) ? 1 : 0\n      if (axis.horizontal.negative.includes(button))\n        axis.value.x = this.isPressing(button) ? -1 : 0\n\n      publish(AXIS_CHANGED, { axis: topic, value: axis.value })\n    }\n  }\n\n  setAxis (axis, direction) {\n    this.state.axes[axis].value = direction\n\n    publish(AXIS_CHANGED, { axis, value: direction })\n  }\n\n  onKeyDown = (event) => {\n    if (event.repeat) return\n\n    const { key } = event\n\n    for (const button in this.state.buttons) {\n      const buttonKeys = this.state.buttons[button]\n\n      if (!buttonKeys.includes(key)) continue\n\n      if (!this.isPressing(button)) this.state.pressing.push(button)\n\n      if ([UP_BUTTON, RIGHT_BUTTON, DOWN_BUTTON, LEFT_BUTTON].includes(button))\n        this.changeAxis(button)\n\n      publish(BUTTON_DOWN)\n    }\n  }\n\n  onKeyUp = (event) => {\n    const { key } = event\n\n    for (const button in this.state.buttons) {\n      const keys = this.state.buttons[button]\n      const index = this.state.pressing.indexOf(button)\n\n      if (!keys.includes(key)) continue\n      if (index < 0) continue\n\n      this.state.pressing.splice(index, 1)\n\n      if ([UP_BUTTON, RIGHT_BUTTON, DOWN_BUTTON, LEFT_BUTTON].includes(button))\n        this.changeAxis(button)\n\n      publish(BUTTON_UP, { button })\n    }\n  }\n\n  reset = () => {\n    this.state.pressing = []\n    this.setAxis(PRIMARY_AXIS, new Vector2())\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"08f233265372088d055ec41fb7e5aa51003b21e8","contentHash":"293b0d145f34a6e014024142fa995936a200445652f22392bf74e271ef12c264"}}